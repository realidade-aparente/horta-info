<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8">
  <title>Receitas de Smoothies com [Ingredientes selecionados]</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body class="page-smoothies">

<div id="sidebar-mount"></div>
  <div class="with-sidebar">
  <div class="masthead-sentinel" aria-hidden="true"></div>

  <div class="masthead">

  <header class="site-header">
    <h1>Smoothies com [Ingredientes selecionados]</h1>
    <nav>
      <a href="refeicoes.html">Refeições</a>
      <a href="sumos.html">Sumos</a>
      <a href="smoothies.html" class="ativa">Smoothies</a>
    </nav>
  </header>

  <section class="banner banner-smoothies">
    <div class="banner-content">
      <h2>Receitas de smoothies</h2>
      <p>Cremosos, nutritivos e cheios de frutas, vegetais e outros ingredientes.</p>
    </div>
  </section>

  <main class="conteudo">
    <section>
      <h2>Filtros de dieta</h2>
      <div id="filtros-dieta" class="filtros-dieta">
        <!--<label>
          <input type="checkbox" value="vegetariana">
          Vegetarianas
        </label>
        <label>
          <input type="checkbox" value="vegan">
          Vegan
        </label>
        <label>
          <input type="checkbox" value="raw-vegan">
          Raw vegan
        </label> -->
      
    
    
    


        <label><input type="checkbox" id="filtro-sem-gluten"> Sem glúten</label>
        <label><input type="checkbox" id="filtro-sem-lactose"> Sem lactose</label>
        <label><input type="checkbox" id="filtro-sem-soja"> Sem soja</label>

</div>
    </section>

    <section>
      <h2>Escolhe os ingredientes</h2>
      <p>Marca os ingredientes que tens em casa e vê as receitas possíveis.</p>
      <div id="contador-ingredientes" class="contador-ingredientes">(0 ingredientes disponíveis)</div></p>
      <div id="lista-ingredientes" class="lista-ingredientes">
      </div>

      <div class="botoes-acoes">
        <button id="btn-procurar">Procurar receitas</button>
        <button id="btn-limpar" type="button">Limpar seleções</button>
      
    
    
    

</div>
    </section>

    <section>
      <h2>Resultados</h2>
      <p id="contador-resultados">(0 receitas encontradas)</p>
      <div id="resultados">
    
    
<script>
  (function(){
    const mount = document.getElementById("sidebar-mount");
    if(!mount) return;

    const applyActive = (root) => {
      const path = (location.pathname.split("/").pop() || "../inicio.html").toLowerCase();
      root.querySelectorAll(".nav-item").forEach(a => {
        const route = (a.getAttribute("data-route") || a.getAttribute("href") || "").toLowerCase();
        const href = (a.getAttribute("href") || "").toLowerCase();
        const isActive = (route && route === path) || (href && href === path);
        if(isActive) a.classList.add("active");
        else a.classList.remove("active");
      });
    };

    const setCollapsed = (sidebar, collapsed) => {
      sidebar.setAttribute("data-collapsed", collapsed ? "1" : "0");
      document.body.classList.toggle("sidebar-collapsed", !!collapsed);
      localStorage.setItem("sidebar-collapsed", collapsed ? "1" : "0");
    };

    fetch("../sidebar_filtros_receitas.html", { cache: "no-store" })
      .then(r => r.text())
      .then(html => {
        mount.innerHTML = html;

        const sidebar = mount.querySelector(".sidebar");
        const toggle = mount.querySelector(".sidebar-toggle");
        if(!sidebar || !toggle) return;

        // restore collapsed state
        const saved = localStorage.getItem("sidebar-collapsed");
        const collapsed = saved === "1";
        setCollapsed(sidebar, collapsed);

        toggle.addEventListener("click", () => {
          const now = sidebar.getAttribute("data-collapsed") === "1";
          setCollapsed(sidebar, !now);
        });

        applyActive(mount);
      })
      .catch(() => {
        // se sidebar.html não existir, não quebra a página
      });

    // Masthead "stuck" feedback
    const masthead = document.querySelector(".with-sidebar .masthead");
    const sentinel = document.querySelector(".masthead-sentinel");
    if(masthead && sentinel && "IntersectionObserver" in window){
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          masthead.classList.toggle("is-stuck", !entry.isIntersecting);
        });
      }, {root: null, threshold: 0});
      io.observe(sentinel);
    }
  })();
  </script>        

</div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 – Receitas com [Planta]</p>
  </footer>

  <script>
    const RECIPE_JSON_URL = "smoothies/receitas_smoothies.json";
  </script>
  <script src="../receitas_com_contador_e_link_v2.js"></script>
</body>
</html>
